{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}
{% if not app.user %}
    <div class="global-container"> 
        <h1>COMMENTS</h1>
        <div class="container-all-track">
            <div id="container-comment">
                {% for comment in comments %}
                <div id="comment">
                    <div id="comment-author">
                        <h2>{{comment.author}}</h2>
                        <img class="photoprofil-small" src="{{ asset('images/media/' ~ comment.author.media) }}" alt="{{ comment.author.media }}">
                    </div>
                    <p>{{comment.content}}</p>
                    <p id="comment-date">{{comment.createdAt|date('Y-m-d H:i:s')}}</p>
                    <span></span>
                </div>
                {% endfor %}
                <div class="infos-track-details">
                    <a class="small-btn" id="small-btn-bis" href="{{path('app_stream')}}">back<i id="i-2"class="fas fa-long-arrow-alt-left"></i></a>
                </div>
            </div>
        </div>
        </h1>
    </div>
{% else %}
    <div class="global-container"> 
        <h1>COMMENTS</h1>
        <div class="container-all-track">
            <div class="container-track" id="container-track-comment">
                <div id="artwork">
                    <img class="images-stream" src="{{asset('images/media/' ~ track.media)}}" alt="{{track.media}}">
                </div>
                <div id="infos-track">
                    <div id="artistandtitle">
                        <span>
                            {{ form_start(form) }}
                            {{ form_widget(form.content) }}
                            {{ form_widget(form.comment, { 'label': 'ADD NEW'}) }}
                            {{ form_end(form) }}
                        </span>
                        <div id="container-btn-track">
                            <a class="small-btn" id="small-btn-bis" href="{{path('app_stream')}}">back</a>
                            <a class="small-btn" id="btn-slide-comment">READ ALL</a>
                        </div>
                    </div>
                </div>
                <div id="container-comment">
                {% for comment in comments %}
                <div id="comment">
                    <div id="comment-author">
                        <div>
                            <h2>{{comment.author}}</h2>
                            <img class="photoprofil-small" src="{{ asset('images/media/' ~ comment.author.media) }}" alt="{{ comment.author.media }}">
                        </div>
                        
                        <div>
                            <p id="comment-date">{{comment.createdAt|date('Y-m-d')}}</p>
                        </div>
                    </div>
                    <p>{{comment.content}}</p>
                    <div class="update-delete-comment">
                        {% if app.user.id %}
                        {% if app.user.id is same as comment.author.id  %}
                            {{ include('stream/deletecomment.html.twig') }}
                            <a href="{{path('app_stream_editcomment', {'id': comment.id}) }}"><i class="fas fa-edit"></i></a>
                        {% else %}
                        {% endif %}
                        {% endif %}
                    </div>
                    <span></span>
                </div>
                {% endfor %}
                {% endif %}
            </div>
            </div>
        </div>
        </h1>
    </div>
{% endblock %}
